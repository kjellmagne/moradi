@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 240 6% 97%;
    --foreground: 240 10% 6%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 6%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 6%;
    --primary: 258 90% 62%;
    --primary-foreground: 0 0% 100%;
    --secondary: 250 40% 96%;
    --secondary-foreground: 250 40% 16%;
    --muted: 240 8% 93%;
    --muted-foreground: 240 6% 45%;
    --accent: 258 80% 96%;
    --accent-foreground: 258 75% 42%;
    --destructive: 0 80% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 240 12% 88%;
    --input: 240 12% 88%;
    --ring: 258 90% 62%;
    --radius: 1rem;

    --success: 160 84% 44%;
    --success-foreground: 0 0% 100%;
    --warning: 38 95% 54%;
    --warning-foreground: 0 0% 100%;

    /* Theme-aware extended palette */
    --theme-50:  258 90% 97%;
    --theme-100: 258 80% 93%;
    --theme-200: 258 70% 85%;
    --theme-300: 258 65% 75%;
    --theme-400: 258 75% 65%;
    --theme-500: 258 90% 62%;
    --theme-600: 258 85% 52%;
    --theme-700: 258 80% 42%;

    /* Gradient endpoints */
    --theme-shell-from: #f5f3ff;
    --theme-shell-mid: #ede9fe;
    --theme-shell-accent: #fef1ee;
    --theme-shell-to: #faf5ff;
    --theme-admin-from: #f8f7ff;
    --theme-admin-mid: #f0eef9;
    --theme-admin-accent: #fef5f0;

    /* Sidebar dark gradient */
    --theme-sidebar-from: #1e1145;
    --theme-sidebar-mid: #2d1b69;

    /* Shadow tint (RGB for rgba()) */
    --theme-shadow: 80, 50, 140;
    --theme-glow: 124, 58, 237;
    --theme-scrollbar: 167, 139, 250;

    /* Progress bar primary */
    --theme-progress-from: #7c3aed;
    --theme-progress-to: #a78bfa;

    /* Person avatar */
    --theme-avatar-from: #7c3aed;
    --theme-avatar-to: #a78bfa;

    /* Week/segmented badge */
    --theme-badge-from: #ede9fe;
    --theme-badge-to: #ddd6fe;
    --theme-badge-text: #6d28d9;

    /* Topbar tint */
    --theme-topbar-bg: rgba(252, 251, 255, 0.88);

    /* Card subtle tint */
    --theme-card-tint: rgba(250, 248, 255, 0.92);
    --theme-card-border: rgba(200, 190, 230, 0.4);

    /* Segmented/tab bg */
    --theme-segmented-bg: rgba(237, 233, 254, 0.6);
    --theme-segmented-border: rgba(200, 190, 230, 0.5);
    --theme-tab-bg: rgba(237, 233, 254, 0.7);
    --theme-tab-border: rgba(200, 190, 230, 0.4);

    /* Soft button tint */
    --theme-btn-tint: #f8f6ff;
  }

  /* ─── Ocean Blue Theme ─────────────────────────────────────── */
  [data-theme="ocean"] {
    --primary: 210 90% 50%;
    --primary-foreground: 0 0% 100%;
    --secondary: 210 40% 96%;
    --secondary-foreground: 210 40% 16%;
    --accent: 210 80% 96%;
    --accent-foreground: 210 75% 35%;
    --ring: 210 90% 50%;

    --theme-50:  210 90% 97%;
    --theme-100: 210 80% 92%;
    --theme-200: 210 70% 84%;
    --theme-300: 210 65% 72%;
    --theme-400: 210 75% 60%;
    --theme-500: 210 90% 50%;
    --theme-600: 210 85% 42%;
    --theme-700: 210 80% 34%;

    --theme-shell-from: #f0f7ff;
    --theme-shell-mid: #dbeafe;
    --theme-shell-accent: #fef1ee;
    --theme-shell-to: #f0f9ff;
    --theme-admin-from: #f5f9ff;
    --theme-admin-mid: #e8f0fe;
    --theme-admin-accent: #fef5f0;

    --theme-sidebar-from: #0c1e3a;
    --theme-sidebar-mid: #163060;

    --theme-shadow: 30, 60, 140;
    --theme-glow: 37, 99, 235;
    --theme-scrollbar: 96, 165, 250;

    --theme-progress-from: #2563eb;
    --theme-progress-to: #60a5fa;

    --theme-avatar-from: #2563eb;
    --theme-avatar-to: #60a5fa;

    --theme-badge-from: #dbeafe;
    --theme-badge-to: #bfdbfe;
    --theme-badge-text: #1e40af;

    --theme-topbar-bg: rgba(248, 252, 255, 0.88);
    --theme-card-tint: rgba(248, 252, 255, 0.92);
    --theme-card-border: rgba(180, 200, 240, 0.4);
    --theme-segmented-bg: rgba(219, 234, 254, 0.6);
    --theme-segmented-border: rgba(180, 200, 240, 0.5);
    --theme-tab-bg: rgba(219, 234, 254, 0.7);
    --theme-tab-border: rgba(180, 200, 240, 0.4);
    --theme-btn-tint: #f5f9ff;
  }

  /* ─── Sunset Orange Theme ──────────────────────────────────── */
  [data-theme="sunset"] {
    --primary: 20 90% 55%;
    --primary-foreground: 0 0% 100%;
    --secondary: 20 40% 96%;
    --secondary-foreground: 20 40% 16%;
    --accent: 20 80% 96%;
    --accent-foreground: 20 75% 38%;
    --ring: 20 90% 55%;

    --theme-50:  20 90% 97%;
    --theme-100: 20 80% 93%;
    --theme-200: 20 70% 85%;
    --theme-300: 20 65% 74%;
    --theme-400: 20 75% 62%;
    --theme-500: 20 90% 55%;
    --theme-600: 20 85% 46%;
    --theme-700: 20 80% 38%;

    --theme-shell-from: #fffbf5;
    --theme-shell-mid: #fed7aa;
    --theme-shell-accent: #fff1f2;
    --theme-shell-to: #fffbf5;
    --theme-admin-from: #fffcf7;
    --theme-admin-mid: #fef3e2;
    --theme-admin-accent: #fff5f0;

    --theme-sidebar-from: #3b1508;
    --theme-sidebar-mid: #6b2c10;

    --theme-shadow: 140, 60, 30;
    --theme-glow: 234, 88, 12;
    --theme-scrollbar: 251, 146, 60;

    --theme-progress-from: #ea580c;
    --theme-progress-to: #fb923c;

    --theme-avatar-from: #ea580c;
    --theme-avatar-to: #fb923c;

    --theme-badge-from: #ffedd5;
    --theme-badge-to: #fed7aa;
    --theme-badge-text: #c2410c;

    --theme-topbar-bg: rgba(255, 252, 248, 0.88);
    --theme-card-tint: rgba(255, 252, 248, 0.92);
    --theme-card-border: rgba(240, 200, 170, 0.4);
    --theme-segmented-bg: rgba(254, 215, 170, 0.5);
    --theme-segmented-border: rgba(240, 200, 170, 0.5);
    --theme-tab-bg: rgba(254, 215, 170, 0.6);
    --theme-tab-border: rgba(240, 200, 170, 0.4);
    --theme-btn-tint: #fffcf7;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-feature-settings: 'rlig' 1, 'calt' 1;
  }
}

/* ─── Keyframe Animations ─────────────────────────────────────── */

@keyframes fade-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fade-in-up {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slide-in-right {
  from { opacity: 0; transform: translateX(30px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes slide-in-left {
  from { opacity: 0; transform: translateX(-30px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes scale-in {
  from { opacity: 0; transform: scale(0.92); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes pop-in {
  0% { opacity: 0; transform: scale(0.8); }
  70% { transform: scale(1.04); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes check-bounce {
  0% { transform: scale(0); }
  50% { transform: scale(1.3); }
  70% { transform: scale(0.9); }
  100% { transform: scale(1); }
}

@keyframes slide-out-right {
  from { opacity: 1; transform: translateX(0); }
  to { opacity: 0; transform: translateX(100%); }
}

@keyframes shimmer {
  from { background-position: -200% 0; }
  to { background-position: 200% 0; }
}

@keyframes bottom-sheet-in {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

@keyframes bottom-sheet-out {
  from { transform: translateY(0); }
  to { transform: translateY(100%); }
}

@keyframes overlay-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes overlay-out {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes progress-fill {
  from { width: 0; }
}

@keyframes confetti-pop {
  0% { transform: scale(0) rotate(0deg); opacity: 1; }
  50% { transform: scale(1.2) rotate(180deg); opacity: 0.8; }
  100% { transform: scale(0) rotate(360deg); opacity: 0; }
}

@keyframes pulse-ring {
  0% { transform: scale(1); opacity: 0.4; }
  100% { transform: scale(1.8); opacity: 0; }
}

@keyframes stagger-in {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

@layer components {
  /* ─── Animation utility classes ──────────────────────────────── */

  .animate-fade-in {
    animation: fade-in 350ms cubic-bezier(0.22, 1, 0.36, 1) both;
  }

  .animate-fade-in-up {
    animation: fade-in-up 450ms cubic-bezier(0.22, 1, 0.36, 1) both;
  }

  .animate-slide-right {
    animation: slide-in-right 400ms cubic-bezier(0.22, 1, 0.36, 1) both;
  }

  .animate-slide-left {
    animation: slide-in-left 400ms cubic-bezier(0.22, 1, 0.36, 1) both;
  }

  .animate-scale-in {
    animation: scale-in 300ms cubic-bezier(0.22, 1, 0.36, 1) both;
  }

  .animate-pop-in {
    animation: pop-in 400ms cubic-bezier(0.22, 1, 0.36, 1) both;
  }

  .animate-check-bounce {
    animation: check-bounce 400ms cubic-bezier(0.22, 1, 0.36, 1) both;
  }

  .animate-slide-out-right {
    animation: slide-out-right 300ms cubic-bezier(0.55, 0, 1, 0.45) both;
  }

  .animate-stagger-in {
    animation: stagger-in 400ms cubic-bezier(0.22, 1, 0.36, 1) both;
  }

  /* Stagger delays for lists */
  .stagger-1 { animation-delay: 30ms; }
  .stagger-2 { animation-delay: 60ms; }
  .stagger-3 { animation-delay: 90ms; }
  .stagger-4 { animation-delay: 120ms; }
  .stagger-5 { animation-delay: 150ms; }
  .stagger-6 { animation-delay: 180ms; }
  .stagger-7 { animation-delay: 210ms; }
  .stagger-8 { animation-delay: 240ms; }
  .stagger-9 { animation-delay: 270ms; }
  .stagger-10 { animation-delay: 300ms; }

  /* ─── Global App Shells ──────────────────────────────────────── */

  .app-shell {
    @apply min-h-dvh;
    background: linear-gradient(145deg, var(--theme-admin-from) 0%, var(--theme-admin-mid) 40%, var(--theme-admin-accent) 100%);
  }

  .mobile-app-shell {
    @apply min-h-dvh;
    background: linear-gradient(180deg, #f2f3f5 0%, #eef0f3 100%);
    -webkit-overflow-scrolling: touch;
  }

  /* ─── iPhone-inspired mobile layout ─────────────────────────── */

  .iphone-top-chrome {
    background: linear-gradient(
      145deg,
      hsl(var(--theme-200) / 0.56) 0%,
      hsl(var(--theme-100) / 0.64) 48%,
      hsl(var(--theme-50) / 0.82) 100%
    );
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-bottom: 1px solid hsl(var(--theme-300) / 0.68);
    box-shadow:
      0 1px 6px rgba(var(--theme-shadow), 0.12),
      0 1px 2px rgba(var(--theme-shadow), 0.08);
  }

  .iphone-app-title {
    @apply text-[1.5rem] font-semibold tracking-tight text-slate-800;
    letter-spacing: -0.015em;
  }

  .iphone-person-link {
    @apply min-w-0 rounded-md px-1 py-0.5 text-right transition;
  }

  .iphone-person-subtle {
    @apply max-w-[180px] text-sm font-medium text-slate-500;
  }

  .iphone-person-link:hover .iphone-person-subtle {
    @apply text-slate-700;
  }

  .iphone-icon-pill {
    @apply flex h-10 w-10 items-center justify-center rounded-xl border text-slate-500 transition;
    border-color: rgba(203, 213, 225, 0.9);
    background: #ffffff;
    box-shadow: 0 1px 2px rgba(15, 23, 42, 0.06);
  }

  .iphone-icon-pill:hover {
    color: hsl(var(--theme-600));
    border-color: hsl(var(--theme-300));
  }

  .iphone-date-rail {
    @apply grid grid-cols-[44px_1fr_44px] items-center rounded-2xl border bg-white px-1 py-1.5;
    border-color: rgba(203, 213, 225, 0.9);
    box-shadow: 0 1px 3px rgba(15, 23, 42, 0.08);
  }

  .iphone-date-nav {
    @apply flex h-10 w-10 items-center justify-center rounded-xl text-slate-500 transition;
  }

  .iphone-date-nav:hover {
    @apply bg-slate-100 text-slate-700;
  }

  .iphone-date-center {
    @apply block w-full rounded-xl px-2 py-2 text-center text-[1.45rem] font-semibold leading-tight text-slate-700 transition;
    letter-spacing: -0.01em;
  }

  .iphone-date-center:hover {
    @apply bg-slate-100;
  }

  .iphone-calendar {
    @apply mx-auto max-w-[320px] pb-1;
  }

  .iphone-calendar-header {
    @apply mb-2 flex items-center justify-between;
  }

  .iphone-calendar-title {
    @apply text-sm font-semibold capitalize text-slate-800;
    letter-spacing: -0.01em;
  }

  .iphone-calendar-nav {
    @apply flex h-8 w-8 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-600 transition;
  }

  .iphone-calendar-nav:hover {
    @apply border-slate-300 bg-slate-50 text-slate-800;
  }

  .iphone-calendar-weekdays {
    @apply mb-1 grid justify-center;
    grid-template-columns: repeat(7, 36px);
    gap: 4px;
  }

  .iphone-calendar-weekdays span {
    @apply py-1 text-center text-[10px] font-semibold uppercase text-slate-400;
  }

  .iphone-calendar-grid {
    @apply grid justify-center;
    grid-template-columns: repeat(7, 36px);
    gap: 4px;
  }

  .iphone-calendar-empty {
    @apply h-9 w-9;
  }

  .iphone-calendar-day {
    @apply h-9 w-9 rounded-full text-sm font-medium text-slate-700 transition;
  }

  .iphone-calendar-day:hover {
    @apply bg-slate-100;
  }

  .iphone-calendar-day-selected {
    @apply bg-theme-500 text-white;
    box-shadow: 0 2px 8px rgba(var(--theme-glow), 0.28);
  }

  .iphone-calendar-day-today {
    @apply border border-theme-300 bg-theme-50 text-theme-700;
  }

  .iphone-task-card {
    @apply rounded-2xl border p-3;
    border-color: rgba(203, 213, 225, 0.9);
    background: #f8fafc;
    box-shadow: 0 1px 2px rgba(15, 23, 42, 0.08);
  }

  .iphone-task-card-done {
    @apply bg-slate-50;
  }

  .iphone-task-card-overdue {
    @apply bg-white;
  }

  .iphone-task-divider {
    @apply mb-2 mt-2 border-t border-slate-200/80;
  }

  .iphone-task-meta-row {
    @apply flex items-center gap-1.5 text-[0.92rem] text-slate-600;
  }

  .iphone-state-pill {
    @apply inline-flex rounded-md px-2.5 py-1 text-xs font-semibold;
  }

  .iphone-state-pill-open {
    @apply bg-slate-100 text-slate-600;
  }

  .iphone-state-pill-done {
    @apply bg-theme-100 text-theme-700;
  }

  .iphone-state-pill-overdue {
    color: hsl(0 60% 45%);
    background: hsl(0 85% 96%);
  }

  .iphone-check-btn {
    @apply mt-0.5 flex h-[52px] w-[52px] shrink-0 items-center justify-center rounded-xl border transition;
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.85),
      0 1px 2px rgba(15, 23, 42, 0.08);
  }

  .iphone-check-btn-open {
    @apply rounded-full text-slate-400;
    width: 48px;
    height: 48px;
    border-color: transparent;
    background: transparent;
    box-shadow: none;
  }

  .iphone-check-btn-overdue {
    @apply rounded-full;
    width: 48px;
    height: 48px;
    border-color: transparent;
    @apply text-slate-500;
    background: transparent;
    box-shadow: none;
  }

  .iphone-check-btn-done {
    @apply rounded-full;
    width: 48px;
    height: 48px;
    border-color: #63b778;
    background: #63b778;
    color: white;
    box-shadow: 0 1px 4px rgba(99, 183, 120, 0.24);
  }

  .iphone-check-empty {
    @apply h-full w-full rounded-full border-2 border-current bg-transparent;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.45);
  }

  .iphone-check-btn-overdue .iphone-check-empty {
    @apply border-slate-500;
  }

  .iphone-success-card {
    @apply flex flex-col items-center rounded-2xl border bg-white px-6 py-6 text-center;
    border-color: rgba(203, 213, 225, 0.9);
    box-shadow: 0 1px 3px rgba(15, 23, 42, 0.09);
  }

  .iphone-week-card {
    @apply flex items-center gap-3 rounded-2xl border bg-white p-3;
    border-color: rgba(203, 213, 225, 0.9);
    box-shadow: 0 1px 2px rgba(15, 23, 42, 0.08);
  }

  .iphone-week-number {
    @apply flex h-11 w-11 shrink-0 items-center justify-center rounded-xl border text-sm font-semibold text-slate-700;
    border-color: hsl(var(--theme-300));
    color: hsl(var(--theme-700));
    background: hsl(var(--theme-100));
  }

  .iphone-week-owner {
    @apply rounded-full px-2.5 py-1 text-xs font-medium;
  }

  .iphone-week-owner-assigned {
    @apply bg-theme-100 text-theme-700;
  }

  .iphone-week-owner-unassigned {
    @apply bg-slate-100 text-slate-700;
  }

  .iphone-done-tag {
    @apply inline-flex rounded-full bg-theme-100 px-2.5 py-1 text-xs font-medium text-theme-700;
  }

  .iphone-settings-card {
    @apply rounded-2xl border bg-white p-3;
    border-color: rgba(203, 213, 225, 0.9);
    box-shadow: 0 1px 2px rgba(15, 23, 42, 0.08);
  }

  .iphone-setting-row {
    @apply flex w-full items-center gap-2 rounded-xl border border-slate-200 bg-slate-50 px-2.5 py-2;
  }

  .iphone-theme-grid {
    @apply grid grid-cols-3 gap-2;
  }

  .iphone-theme-option {
    @apply flex flex-col items-center gap-1 rounded-xl border border-slate-200 bg-slate-50 px-2 py-2 text-xs font-medium text-slate-700 transition;
  }

  .iphone-theme-option-active {
    border-color: hsl(var(--theme-300));
    background: hsl(var(--theme-100));
    color: hsl(var(--theme-700));
  }

  .iphone-theme-swatches {
    @apply flex items-center gap-1;
  }

  .iphone-theme-swatches span {
    @apply h-4 w-4 rounded-full;
  }

  .iphone-tabbar {
    padding-bottom: env(safe-area-inset-bottom);
    background: linear-gradient(to top, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.9));
  }

  .iphone-tabbar-inner {
    @apply grid grid-cols-3 border-t border-slate-200 bg-white;
    box-shadow: 0 -3px 14px rgba(15, 23, 42, 0.08);
  }

  .iphone-tab-btn {
    @apply relative flex items-center justify-center gap-2 px-2 py-3 text-[1rem] font-medium text-slate-500 transition;
  }

  .iphone-tab-btn-active {
    color: hsl(var(--theme-600));
  }

  .iphone-tab-btn-active::after {
    content: '';
    position: absolute;
    left: 20%;
    right: 20%;
    bottom: 0;
    height: 3px;
    border-radius: 999px;
    background: hsl(var(--theme-500));
  }

  .iphone-tab-btn-inactive {
    @apply text-slate-500;
  }

  /* ─── iPad design aligned with iPhone principles ────────────── */

  .ipad-app-shell {
    @apply min-h-dvh;
    background: linear-gradient(180deg, #eef0f3 0%, #e9ecef 100%);
    -webkit-overflow-scrolling: touch;
  }

  .ipad-top-chrome {
    background: rgba(238, 240, 243, 0.92);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(203, 213, 225, 0.75);
  }

  .ipad-header-panel {
    @apply rounded-3xl border px-5 py-4;
    border-color: hsl(var(--theme-300) / 0.68);
    background: linear-gradient(
      145deg,
      hsl(var(--theme-200) / 0.56) 0%,
      hsl(var(--theme-100) / 0.64) 48%,
      hsl(var(--theme-50) / 0.82) 100%
    );
    box-shadow:
      0 1px 6px rgba(var(--theme-shadow), 0.12),
      0 1px 2px rgba(var(--theme-shadow), 0.08);
  }

  .ipad-app-title {
    @apply text-3xl font-semibold tracking-tight text-slate-800;
    letter-spacing: -0.015em;
  }

  .ipad-app-subtitle {
    @apply mt-1 text-sm font-medium text-slate-600;
  }

  .ipad-week-rail {
    @apply mt-3 grid grid-cols-[44px_1fr_44px] items-center rounded-2xl border px-1.5 py-1.5;
    border-color: hsl(var(--theme-200) / 0.9);
    background: linear-gradient(
      145deg,
      rgba(255, 255, 255, 0.96) 0%,
      hsl(var(--theme-50) / 0.96) 62%,
      hsl(var(--theme-100) / 0.9) 100%
    );
    box-shadow: 0 1px 2px rgba(15, 23, 42, 0.06);
    width: calc(100% - 6px);
    margin-inline: 3px;
  }

  .ipad-week-nav {
    @apply flex h-10 w-10 items-center justify-center rounded-xl border text-slate-500 transition;
    border-color: hsl(var(--theme-200) / 0.95);
    background: rgba(255, 255, 255, 0.82);
  }

  .ipad-week-nav:hover {
    @apply text-slate-700;
    background: hsl(var(--theme-50) / 0.96);
  }

  .ipad-week-center {
    @apply block min-w-0 w-full rounded-xl border px-2 py-1.5 text-center transition;
    border-color: hsl(var(--theme-200) / 0.85);
    background: rgba(255, 255, 255, 0.74);
  }

  .ipad-week-center:hover {
    background: rgba(255, 255, 255, 0.9);
  }

  .ipad-person-chip {
    @apply rounded-full border border-slate-200 bg-white px-3 py-1.5 text-sm font-medium text-slate-500 transition;
  }

  .ipad-person-chip:hover {
    @apply border-slate-300 text-slate-700;
  }

  .ipad-day-column {
    @apply rounded-2xl border bg-white transition-all duration-200;
    border-color: rgba(203, 213, 225, 0.85);
    box-shadow: 0 1px 3px rgba(15, 23, 42, 0.08);
  }

  .ipad-day-column-today {
    border-color: hsl(var(--theme-300));
    background: hsl(var(--theme-50) / 0.55);
  }

  .ipad-day-head {
    @apply border-b;
    border-color: rgba(226, 232, 240, 0.9);
  }

  .ipad-task-card {
    @apply rounded-2xl border p-3 transition-all duration-200;
    border-color: rgba(203, 213, 225, 0.85);
    @apply bg-white;
    box-shadow: 0 1px 2px rgba(15, 23, 42, 0.08);
  }

  .ipad-task-card-open {
    @apply bg-white;
  }

  .ipad-task-card-done {
    @apply bg-slate-50;
  }

  .ipad-task-card-overdue {
    @apply bg-white;
  }

  .ipad-task-card-disabled {
    @apply opacity-55;
  }

  .ipad-task-divider {
    @apply mb-2 mt-1.5 border-t border-slate-200/80;
  }

  .ipad-task-meta-row {
    @apply flex items-center gap-1.5 text-xs text-slate-600;
  }

  .ipad-check-btn {
    @apply flex h-11 w-11 items-center justify-center rounded-full border transition;
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.85),
      0 1px 2px rgba(15, 23, 42, 0.08);
  }

  .ipad-check-btn-open {
    border-color: transparent;
    @apply bg-transparent text-slate-400;
    box-shadow: none;
  }

  .ipad-check-btn-overdue {
    border-color: transparent;
    @apply text-slate-500;
    background: transparent;
    box-shadow: none;
  }

  .ipad-check-btn-done {
    border-color: #63b778;
    background: #63b778;
    color: white;
    box-shadow: 0 1px 4px rgba(99, 183, 120, 0.24);
  }

  .ipad-check-empty {
    @apply h-full w-full rounded-full border-2 border-current;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.45);
  }

  .ipad-done-tag {
    @apply mt-2 inline-flex rounded-full bg-theme-100 px-2.5 py-1 text-xs font-medium text-theme-700;
  }

  .ipad-week-card {
    @apply flex items-center gap-3 rounded-2xl border bg-white p-3.5;
    border-color: rgba(203, 213, 225, 0.9);
    box-shadow: 0 1px 2px rgba(15, 23, 42, 0.08);
  }

  .ipad-week-number {
    @apply flex h-12 w-12 shrink-0 items-center justify-center rounded-xl border text-base font-semibold;
    border-color: hsl(var(--theme-300));
    color: hsl(var(--theme-700));
    background: hsl(var(--theme-100));
  }

  .ipad-week-owner {
    @apply rounded-full px-3 py-1.5 text-sm font-medium;
  }

  .ipad-week-owner-assigned {
    @apply bg-theme-100 text-theme-700;
  }

  .ipad-week-owner-unassigned {
    @apply bg-slate-100 text-slate-700;
  }

  .ipad-settings-card {
    @apply rounded-2xl border bg-white p-4;
    border-color: rgba(203, 213, 225, 0.9);
    box-shadow: 0 1px 2px rgba(15, 23, 42, 0.08);
  }

  .ipad-settings-label {
    @apply text-[11px] font-semibold uppercase tracking-wide text-slate-500;
  }

  .ipad-setting-row {
    @apply flex w-full items-center gap-3 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2.5;
  }

  .ipad-theme-grid {
    @apply grid grid-cols-3 gap-3;
  }

  .ipad-theme-option {
    @apply flex flex-col items-center gap-2 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2.5 text-sm font-medium text-slate-700 transition;
  }

  .ipad-theme-option-active {
    border-color: hsl(var(--theme-300));
    background: hsl(var(--theme-100));
    color: hsl(var(--theme-700));
  }

  .ipad-theme-swatches {
    @apply flex items-center gap-1.5;
  }

  .ipad-theme-swatches span {
    @apply h-4 w-4 rounded-full;
  }

  .ipad-tabbar {
    padding-bottom: env(safe-area-inset-bottom);
    background: linear-gradient(to top, rgba(233, 236, 239, 0.98), rgba(233, 236, 239, 0.9));
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  .ipad-tabbar-inner {
    @apply mx-5 mb-2 grid grid-cols-3 overflow-hidden rounded-2xl border border-slate-200 bg-white;
    box-shadow: 0 -2px 14px rgba(15, 23, 42, 0.08);
  }

  .ipad-tab-btn {
    @apply relative flex items-center justify-center gap-2 px-2 py-3 text-base font-medium text-slate-500 transition;
  }

  .ipad-tab-btn-active {
    color: hsl(var(--theme-600));
    background: hsl(var(--theme-50) / 0.7);
  }

  .ipad-tab-btn-active::after {
    content: '';
    position: absolute;
    left: 22%;
    right: 22%;
    bottom: 0;
    height: 3px;
    border-radius: 999px;
    background: hsl(var(--theme-500));
  }

  .ipad-tab-btn-inactive {
    @apply text-slate-500;
  }

  /* ─── Admin Shell ────────────────────────────────────────────── */

  .moradi-admin-shell {
    background: linear-gradient(145deg, var(--theme-admin-from) 0%, var(--theme-admin-mid) 40%, var(--theme-admin-accent) 100%);
  }

  .moradi-sidebar {
    background: linear-gradient(175deg, var(--theme-sidebar-from) 0%, var(--theme-sidebar-mid) 50%, var(--theme-sidebar-from) 100%);
  }

  .moradi-topbar {
    background: var(--theme-topbar-bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  /* ─── Cards ──────────────────────────────────────────────────── */

  .moradi-card {
    background: linear-gradient(165deg, rgba(255, 255, 255, 0.97) 0%, var(--theme-card-tint) 100%);
    border-color: var(--theme-card-border);
    box-shadow:
      0 1px 3px rgba(var(--theme-shadow), 0.05),
      0 8px 24px rgba(var(--theme-shadow), 0.08);
    border-radius: 1.25rem;
  }

  .moradi-card-sub {
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.96) 0%, var(--theme-card-tint) 100%);
    border-color: var(--theme-card-border);
    border-radius: 1rem;
  }

  /* ─── Glass Panels (employee views) ──────────────────────────── */

  .moradi-glass-panel {
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.9);
    box-shadow:
      0 4px 24px rgba(var(--theme-shadow), 0.1),
      0 1px 2px rgba(var(--theme-shadow), 0.04);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
  }

  .moradi-glass-strong {
    background: rgba(255, 255, 255, 0.92);
    border: 1px solid var(--theme-card-border);
    box-shadow:
      0 2px 12px rgba(var(--theme-shadow), 0.06),
      0 1px 2px rgba(var(--theme-shadow), 0.03);
  }

  /* ─── Buttons & Interactive ──────────────────────────────────── */

  .moradi-soft-button {
    background: linear-gradient(165deg, #ffffff 0%, var(--theme-btn-tint) 100%);
    border: 1px solid var(--theme-segmented-border);
    box-shadow:
      0 2px 8px rgba(var(--theme-shadow), 0.08),
      0 1px 2px rgba(var(--theme-shadow), 0.04);
    transition: transform 150ms cubic-bezier(0.22, 1, 0.36, 1),
                box-shadow 150ms cubic-bezier(0.22, 1, 0.36, 1),
                background 150ms ease;
  }

  .moradi-soft-button:hover {
    box-shadow:
      0 4px 16px rgba(var(--theme-shadow), 0.12),
      0 1px 3px rgba(var(--theme-shadow), 0.06);
    transform: translateY(-1px);
  }

  .moradi-soft-button:active {
    transform: translateY(1px) scale(0.98);
    box-shadow:
      0 1px 4px rgba(var(--theme-shadow), 0.1);
    transition-duration: 80ms;
  }

  .moradi-segmented {
    background: var(--theme-segmented-bg);
    border: 1px solid var(--theme-segmented-border);
    box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.8);
  }

  /* ─── Chore Cards (colorful states) ──────────────────────────── */

  .chore-card {
    @apply rounded-2xl border p-3.5 transition-all duration-200;
    transform: translateX(0);
    will-change: transform, opacity;
  }

  .chore-card-open {
    @apply border-slate-200/80 bg-white;
    box-shadow: 0 2px 8px rgba(var(--theme-shadow), 0.06);
  }

  .chore-card-done {
    @apply border-slate-200/60 bg-slate-50/80;
    box-shadow: 0 1px 4px rgba(var(--theme-shadow), 0.03);
  }

  .chore-card-overdue {
    @apply border-slate-200/80 bg-white;
    box-shadow: 0 2px 8px rgba(var(--theme-shadow), 0.06);
    border-left: 3px solid hsl(0 70% 62%);
  }

  .chore-card-disabled {
    @apply border-slate-200/60 bg-slate-50 opacity-50;
  }

  /* Swipe feedback */
  .chore-card-swiping {
    transition: none !important;
  }

  .chore-card-completing {
    animation: slide-out-right 300ms cubic-bezier(0.55, 0, 1, 0.45) forwards;
  }

  /* ─── Completion Checkbox ────────────────────────────────────── */

  .check-circle {
    @apply flex items-center justify-center rounded-full transition-all duration-200;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
  }

  .check-circle-open {
    @apply border-2 border-slate-300 bg-white text-slate-400;
  }

  .check-circle-done {
    @apply border-2 text-white;
    border-color: hsl(var(--theme-400));
    background: hsl(var(--theme-500));
  }

  .check-circle-overdue {
    @apply border-2 bg-white;
    border-color: hsl(0 50% 70%);
    color: hsl(0 50% 60%);
  }

  /* ─── Bottom Sheet ───────────────────────────────────────────── */

  .bottom-sheet-overlay {
    @apply fixed inset-0 z-50;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }

  .bottom-sheet-overlay[data-state='open'] {
    animation: overlay-in 200ms ease forwards;
  }

  .bottom-sheet-overlay[data-state='closing'] {
    animation: overlay-out 200ms ease forwards;
  }

  .bottom-sheet {
    @apply fixed inset-x-0 bottom-0 z-50 rounded-t-3xl bg-white;
    box-shadow: 0 -8px 40px rgba(var(--theme-shadow), 0.15);
    max-height: 90dvh;
    will-change: transform;
  }

  .bottom-sheet[data-state='open'] {
    animation: bottom-sheet-in 350ms cubic-bezier(0.22, 1, 0.36, 1) forwards;
  }

  .bottom-sheet[data-state='closing'] {
    animation: bottom-sheet-out 250ms cubic-bezier(0.55, 0, 1, 0.45) forwards;
  }

  .bottom-sheet-handle {
    @apply mx-auto mt-3 mb-2 h-1.5 w-12 rounded-full bg-slate-300;
  }

  /* ─── Progress Bar ───────────────────────────────────────────── */

  .progress-bar {
    @apply h-2 overflow-hidden rounded-full bg-slate-100;
  }

  .progress-bar-fill {
    @apply h-full rounded-full transition-all duration-700 ease-out;
    animation: progress-fill 800ms cubic-bezier(0.22, 1, 0.36, 1) both;
  }

  .progress-bar-fill-good {
    background: linear-gradient(90deg, var(--theme-progress-from), var(--theme-progress-to));
  }

  .progress-bar-fill-warn {
    background: linear-gradient(90deg, var(--theme-progress-from), var(--theme-progress-to));
  }

  .progress-bar-fill-bad {
    background: linear-gradient(90deg, var(--theme-progress-from), var(--theme-progress-to));
  }

  .progress-bar-fill-primary {
    background: linear-gradient(90deg, var(--theme-progress-from), var(--theme-progress-to));
  }

  /* ─── Stat Pill ──────────────────────────────────────────────── */

  .stat-pill {
    @apply rounded-2xl px-4 py-3 text-center;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
  }

  .stat-pill-default {
    @apply border border-slate-200 bg-white;
  }

  .stat-pill-good {
    @apply border border-slate-200 bg-white;
  }

  .stat-pill-warn {
    @apply border border-slate-200 bg-white;
  }

  .stat-pill-bad {
    @apply border border-slate-200 bg-white;
  }

  .stat-pill-primary {
    border: 1px solid hsl(var(--theme-200));
    background: linear-gradient(to bottom right, hsl(var(--theme-50)), hsl(var(--theme-100)));
  }

  /* ─── Person Avatar ──────────────────────────────────────────── */

  .person-avatar {
    @apply flex items-center justify-center rounded-full text-sm font-bold text-white;
    background: linear-gradient(135deg, var(--theme-avatar-from) 0%, var(--theme-avatar-to) 100%);
    box-shadow: 0 2px 8px rgba(var(--theme-glow), 0.25);
  }

  /* ─── Day Column (iPad) ──────────────────────────────────────── */

  .day-column {
    @apply rounded-2xl border bg-white/90 transition-all duration-200;
    box-shadow: 0 2px 8px rgba(var(--theme-shadow), 0.04);
  }

  .day-column-today {
    border-color: hsl(var(--theme-200));
    background-color: hsl(var(--theme-50) / 0.3);
    box-shadow: 0 2px 12px rgba(var(--theme-glow), 0.06);
  }

  /* ─── Scrollbar ──────────────────────────────────────────────── */

  .scroll-area-soft {
    scrollbar-width: thin;
    scrollbar-color: rgba(var(--theme-scrollbar), 0.3) transparent;
    -webkit-overflow-scrolling: touch;
  }

  .scroll-area-soft::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scroll-area-soft::-webkit-scrollbar-thumb {
    background: rgba(var(--theme-scrollbar), 0.3);
    border-radius: 999px;
  }

  .scroll-area-soft::-webkit-scrollbar-thumb:hover {
    background: rgba(var(--theme-scrollbar), 0.5);
  }

  /* ─── Touch optimizations ────────────────────────────────────── */

  .touch-target {
    @apply relative;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }

  .touch-target::after {
    content: '';
    @apply absolute -inset-2;
  }

  /* ─── Person selection buttons ───────────────────────────────── */

  .person-select-btn {
    @apply flex w-full items-center gap-3 rounded-2xl border-2 px-4 py-3.5 text-left transition-all duration-200;
  }

  .person-select-btn-active {
    border-color: hsl(var(--theme-400));
    background-color: hsl(var(--theme-50));
    box-shadow: 0 0 0 3px rgba(var(--theme-glow), 0.15);
  }

  .person-select-btn-inactive {
    @apply border-slate-200 bg-white;
  }

  .person-select-btn-inactive:hover {
    border-color: hsl(var(--theme-200));
    background-color: hsl(var(--theme-50) / 0.5);
  }

  /* ─── Week owner card ────────────────────────────────────────── */

  .week-card {
    @apply flex items-center gap-3 rounded-2xl border border-slate-200 bg-white p-3.5 transition-all duration-200;
    box-shadow: 0 2px 8px rgba(var(--theme-shadow), 0.04);
  }

  .week-number-badge {
    @apply flex h-12 w-12 shrink-0 items-center justify-center rounded-xl text-sm font-bold;
    background: linear-gradient(135deg, var(--theme-badge-from) 0%, var(--theme-badge-to) 100%);
    color: var(--theme-badge-text);
  }

  /* ─── Swipe hint shimmer ─────────────────────────────────────── */

  .swipe-hint {
    background: linear-gradient(90deg,
      transparent 0%,
      rgba(var(--theme-glow), 0.06) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: shimmer 3s ease-in-out infinite;
  }

  /* ─── Tab Bar (mobile bottom nav feel) ───────────────────────── */

  .tab-bar {
    @apply rounded-2xl p-1.5;
    background: var(--theme-tab-bg);
    border: 1px solid var(--theme-tab-border);
  }

  .tab-bar-item {
    @apply flex items-center justify-center gap-1.5 rounded-xl px-4 py-2.5 text-sm font-medium transition-all duration-200;
  }

  .tab-bar-item-active {
    @apply bg-white;
    color: hsl(var(--theme-700));
    box-shadow: 0 2px 8px rgba(var(--theme-glow), 0.12);
  }

  .tab-bar-item-inactive {
    @apply text-slate-500;
  }

  /* ─── Empty state ────────────────────────────────────────────── */

  .empty-state {
    @apply flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-slate-200 px-6 py-10 text-center;
  }

  /* ─── Dialog (theme-aware shadow) ──────────────────────────── */

  .moradi-dialog {
    border-color: hsl(var(--theme-100) / 0.6);
    box-shadow:
      0 28px 80px rgba(var(--theme-shadow), 0.2),
      0 6px 20px rgba(var(--theme-shadow), 0.08);
  }
}
